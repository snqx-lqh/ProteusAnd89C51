## 03_外部中断实验

### 外部中断

先简单介绍一下中断的概念，在单片机中，对信号的处理可以分为轮询方式和中断方式，轮询方式就是不断去访问一个信号的端口，看看有没有信号进入，有则进行处理，中断方式则是当输入产生的时候，产生一个触发信号告诉单片机有输入信号进入，需要进行处理。

中断的流程就是，先初始化一个条件，这个条件可以是引脚检测到下降沿，可以是你定的一个倒计时，或者其他条件，你的程序正在顺序执行中，一旦这个条件满足了，他就会暂停当前执行的程序，去执行中断服务函数里面的程序，当中断服务函数的程序执行完了后，又返回之前正在执行的程序。

### 外部中断配置

我们这里的外部中断，他的中断条件就是引脚发生了边沿变换，就像下面

```c
void Exti0Init()
{
	IT0 = 1;//1:下降沿触发 0:低电平触发
	EX0 = 1;//打开外部中断0
	EA = 1;//打开总中断开关
}
```

一般配置中断的方法就是，配置触发中断的方式-》打开配置的中断-》使能整体的中断。

51单片机还有一个外部中断方式是低电平进入中断，但是感觉好像用的比较少。

当中断触发后，就会进入中断服务函数。

```c
void Int0Routine(void) interrupt 0
{
	if(KEY1 == 0)
	{
		LED = !LED;
	}
}
```

`Int0Routine`是函数名，可以自己取，0是中断号，每个中断都有自己固定的中断号。中断服务函数每个工程只有一个。

51单片机的外部中断有两个引脚，一个是P32一个是P33，分别是中断号0和中断号2。